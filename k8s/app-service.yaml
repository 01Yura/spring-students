apiVersion: v1
kind: Service
metadata:
  name: spring-students-app
  labels:
    app: spring-students-app
spec:
  type: ClusterIP
  # ClusterIP - внутренний сервис, доступен только внутри кластера
  # Внешний доступ теперь через ingress-nginx (LoadBalancer с MetalLB)
  # ingress-nginx будет балансировать трафик между всеми подами этого сервиса
  ports:
    - port: 8081
      # port: 8081 - внутренний порт сервиса в кластере (для доступа между сервисами)
      targetPort: 8081
      # targetPort: 8081 - порт внутри контейнера, на котором слушает Spring Boot приложение
      # Это порт, указанный в server.port в application.properties
      protocol: TCP
      name: http
  selector:
    app: spring-students-app
